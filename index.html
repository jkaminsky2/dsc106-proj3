<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Zoom to bounding box</title>
    <link rel="stylesheet" type="text/css" href="./inspector.css">
    <style>
        #map {
            width: 100%;
            height: 500px;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script type="module">

        import define from "./index.js";
        import {Runtime, Library, Inspector} from "./runtime.js";

        const runtime = new Runtime();
        const main = runtime.module(define, Inspector.into(document.body));

        // Load the CSV file
        d3.csv("countypres_2000-2020.csv").then(function(data) {
            // Process the data and convert it into GeoJSON format
            const geojsonData = processData(data);

            // Add the GeoJSON data to the map
            main.value.map.data.set(geojsonData);
        });

        // Function to process the CSV data and convert it into GeoJSON format
        function processData(data) {
            // Your processing code here
            // Example: Convert CSV data to GeoJSON format
            const geojsonData = {
                type: "FeatureCollection",
                features: data.map(function(d) {
                    return {
                        type: "Feature",
                        properties: {
                            // Define properties based on your CSV columns
                            // Example: name, population, etc.
                            name: d.County,
                            population: +d.Population
                        },
                        geometry: {
                            type: "Point",
                            coordinates: [parseFloat(d.Longitude), parseFloat(d.Latitude)]
                        }
                    };
                })
            };
            return geojsonData;
        }

    </script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</body>
</html>

